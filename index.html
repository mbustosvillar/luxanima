<!DOCTYPE html>
<html lang="es" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Lux Anima - Manifiesto Interactivo</title>
    <meta name="description" content="Explora tu Sanctum Mentis y despierta tu luz interna con Lux Anima. Un manifiesto para la visión esotérica de elevado valor.">
    <meta property="og:title" content="Lux Anima - Manifiesto Interactivo">
    <meta property="og:description" content="Explora tu Sanctum Mentis y despierta tu luz interna con Lux Anima. Un manifiesto para la visión esotérica de elevado valor.">
    <meta property="og:image" content="https://placehold.co/1200x630/D1CFCB/2A2B8D?text=Lux+Anima+Preview">
    <meta property="og:url" content="https://luxanima.com">
    <link rel="canonical" href="https://luxanima.com">

    <!-- Chosen Palette: Ethereal Neutrals (based on the report's specified colors: fondo, texto, destello) -->
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Cormorant+Garamond:wght@400;600;700&family=Anek+Latin:wght@300;400&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.9.1/dist/gsap.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/gsap@3.9.1/dist/ScrollTrigger.min.js"></script>
    <script src="https://unpkg.com/@lottiefiles/lottie-player@latest/dist/lottie-player.js"></script>
    <style>
        :root {
            --color-fondo: #F7F5F2;
            --color-texto: #2A2B8D;
            --color-destello: #C9A66B;
            --color-borde: #D1CFCB;
        }
        body {
            background-color: var(--color-fondo);
            color: var(--color-texto);
            font-family: 'Anek Latin', sans-serif;
            -webkit-font-smoothing: antialiased;
            -moz-osx-font-smoothing: grayscale;
        }
        h1, h2, h3, h4, .font-display {
            font-family: 'Cormorant Garamond', serif;
        }
        .glass-card {
            background: rgba(247, 245, 242, 0.5);
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            border: 1px solid rgba(209, 207, 203, 0.4);
            transition: all 0.3s cubic-bezier(0.25, 0.8, 0.25, 1);
            position: relative; /* Needed for absolute positioning of sigil */
        }
        .glass-card:hover {
            background: rgba(247, 245, 242, 0.7);
            border-color: rgba(201, 166, 107, 0.5);
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(42, 43, 141, 0.05); /* Keep a subtle shadow */
            outline: 2px solid var(--color-destello); /* Ring effect */
            outline-offset: 2px;
        }
        /* Packaging “aura dorada” para vestible */
        .glass-card.vestible-item:hover { /* Changed class name to avoid conflict with filterable grid */
            outline: 4px solid rgba(201,166,107,0.5); /* Stronger aura for vestible */
            outline-offset: 2px;
        }
        .btn-primary {
            @apply inline-block bg-transparent text-texto border-2 border-texto rounded-full px-8 py-3 font-display font-semibold uppercase tracking-widest transition-all duration-300;
        }
        .btn-primary:hover {
            @apply bg-texto text-fondo shadow-lg;
        }
        .btn-primary:focus-visible {
            outline: none;
            box-shadow: 0 0 0 4px var(--color-destello), 0 0 0 6px var(--color-texto);
        }
        .btn-filter {
            @apply relative bg-transparent text-texto/70 font-display font-semibold uppercase tracking-wider py-2 px-4 transition-all duration-300;
        }
        .btn-filter.active {
            @apply text-texto;
        }
        .btn-filter::after {
            content: '';
            position: absolute;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            width: 0;
            height: 2px;
            background-color: var(--color-destello);
            transition: width 0.3s ease;
        }
        .btn-filter.active::after {
            width: 50%;
        }
        .fade-in {
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.8s ease-out, transform 0.8s ease-out;
        }
        .fade-in.visible {
            opacity: 1;
            transform: translateY(0);
        }
        .pillar-card.active {
            border-color: var(--color-destello);
            box-shadow: 0 0 25px rgba(201, 166, 107, 0.3);
        }
        /* Estilos para los elementos de la arquitectura de marca */
        .brand-item .brand-name {
            color: var(--color-texto); /* Color por defecto */
        }
        .brand-item:hover .brand-name {
            color: var(--color-destello); /* Color al hacer hover */
        }
        .brand-item .brand-description {
            max-height: 0;
            opacity: 0;
            transition: max-height 0.5s ease-in-out, opacity 0.5s ease-in-out, transform 0.5s ease-in-out;
            transform: translateY(-10px);
        }
        .brand-item:hover .brand-description {
            max-height: 200px;
            opacity: 1;
            transform: translateY(0);
        }
        @keyframes pulse-subtle {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.02); }
        }
        .animate-pulse-subtle:hover {
            animation: pulse-subtle 0.8s ease-in-out infinite;
        }
        .lottie-placeholder {
            min-height: 200px; /* Adjust as needed */
            display: flex;
            align-items: center;
            justify-content: center;
            background-color: var(--color-borde);
            border-radius: 1rem;
            color: var(--color-texto);
            font-display: 'Cormorant Garamond', serif;
            font-size: 1.5rem;
        }
        /* Mobile menu specific styles */
        .mobile-menu-overlay {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: rgba(0, 0, 0, 0.5);
            z-index: 99;
            opacity: 0;
            visibility: hidden;
            transition: opacity 0.3s ease, visibility 0.3s ease;
        }
        .mobile-menu-overlay.open {
            opacity: 1;
            visibility: visible;
        }
        .mobile-menu-drawer {
            position: fixed;
            top: 0;
            right: -100%;
            width: 80%;
            max-width: 300px;
            height: 100%;
            background-color: var(--color-fondo);
            box-shadow: -5px 0 15px rgba(0, 0, 0, 0.2);
            z-index: 100;
            transition: right 0.3s ease-out;
            padding: 2rem;
            display: flex;
            flex-direction: column;
            align-items: flex-start;
        }
        .mobile-menu-drawer.open {
            right: 0;
        }
        .hamburger-icon {
            display: flex;
            flex-direction: column;
            justify-content: space-between;
            width: 24px;
            height: 18px;
            cursor: pointer;
            z-index: 60;
        }
        .hamburger-icon span {
            display: block;
            width: 100%;
            height: 2px;
            background-color: var(--color-texto);
            transition: all 0.3s ease;
        }
        .hamburger-icon.open span:nth-child(1) {
            transform: translateY(8px) rotate(45deg);
        }
        .hamburger-icon.open span:nth-child(2) {
            opacity: 0;
        }
        .hamburger-icon.open span:nth-child(3) {
            transform: translateY(-8px) rotate(-45deg);
        }
        .sigil-icon {
            position: absolute;
            top: 1rem;
            right: 1rem;
            font-size: 1.5rem;
            color: var(--color-destello);
            opacity: 0.7;
            transition: opacity 0.3s ease;
        }
        .glass-card:hover .sigil-icon {
            opacity: 1;
        }
        /* Badge de intención */
        .badge-intent {
            display: inline-block;
            margin-top: .5rem;
            padding: .25rem .5rem;
            font-size: .75rem;
            font-family: 'Cormorant Garamond', serif;
            text-transform: uppercase;
            background-color: rgba(201,166,107,0.3);
            color: var(--color-destello);
            border-radius: .25rem;
        }
    </style>
</head>
<body class="overflow-x-hidden">

    <header id="nav-header" class="fixed top-0 left-0 w-full z-50 transition-all duration-300 bg-white shadow-md backdrop-blur-sm">
        <div class="container mx-auto px-6 py-4 flex justify-between items-center">
            <h4 class="font-display text-2xl font-bold tracking-wider text-gray-900">Lux Anima</h4>
            <nav role="navigation" aria-label="Menú principal" class="hidden md:flex space-x-8 font-display uppercase tracking-widest text-sm">
                <a href="#manifesto" class="nav-link hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Manifiesto">Manifiesto</a>
                <a href="#pilares" class="nav-link hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Pilares">Pilares</a>
                <a href="#arquitectura" class="nav-link hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Arquitectura">Ecosistema</a> <!-- Changed text to Ecosistema -->
                <a href="#manifestaciones" class="nav-link hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Manifestaciones">Manifestaciones</a>
                <a href="#sacra-atelier" class="nav-link hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Sacra Atelier">Sacra Atelier</a>
                <a href="#circulo" class="nav-link hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Círculo Interno">Círculo Interno</a>
            </nav>
            <button id="hamburger-btn" class="md:hidden hamburger-icon" aria-label="Abrir menú de navegación">
                <span></span>
                <span></span>
                <span></span>
            </button>
        </div>
    </header>

    <!-- Mobile Menu Drawer -->
    <div id="mobile-menu-overlay" class="mobile-menu-overlay">
        <nav id="mobile-menu-drawer" class="mobile-menu-drawer" role="navigation" aria-label="Menú principal móvil">
            <h4 class="font-display text-2xl font-bold tracking-wider mb-8 text-gray-900">Lux Anima</h4>
            <a href="#manifesto" class="block py-3 text-lg font-display uppercase tracking-widest hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Manifiesto">Manifiesto</a>
            <a href="#pilares" class="block py-3 text-lg font-display uppercase tracking-widest hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Pilares">Pilares</a>
            <a href="#arquitectura" class="block py-3 text-lg font-display uppercase tracking-widest hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Arquitectura">Ecosistema</a>
            <a href="#manifestaciones" class="block py-3 text-lg font-display uppercase tracking-widest hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Manifestaciones">Manifestaciones</a>
            <a href="#sacra-atelier" class="block py-3 text-lg font-display uppercase tracking-widest hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Sacra Atelier">Sacra Atelier</a>
            <a href="#circulo" class="block py-3 text-lg font-display uppercase tracking-widest hover:text-destello transition-colors text-gray-900" aria-label="Ir a la sección Círculo Interno">Círculo Interno</a>
        </nav>
    </div>

    <main>
        <section id="hero" class="h-screen min-h-[700px] flex items-center justify-center relative text-center text-white p-4 overflow-hidden">
            <!-- Fondo degradado místico de Lux Anima -->
            <div class="absolute inset-0 bg-gradient-to-br from-gray-900 via-texto to-gray-800 z-0" role="img" aria-label="Fondo degradado místico de Lux Anima"></div>
            <!-- Se eliminó la imagen de fondo del hero según la solicitud del usuario -->
            <div class="relative z-10 flex flex-col items-center">
                <h3 class="font-display text-2xl md:text-3xl tracking-widest uppercase text-destello/80 mb-4 fade-in">SACRA SIT MIHI LUX</h3>
                <h1 class="font-display text-5xl md:text-8xl font-bold mb-8 fade-in" style="transition-delay: 200ms;">Lux Anima</h1>
                <p class="max-w-2xl text-lg md:text-xl text-white/80 mb-12 leading-relaxed fade-in" style="transition-delay: 400ms;">Un manifiesto para la visión esotérica de **elevado valor**, donde la sabiduría ancestral converge con el minimalismo contemporáneo.</p>
                <a href="#manifesto" class="btn-primary !text-white !border-white hover:!bg-white hover:!text-texto fade-in scroll-link" aria-label="Explorar el Manifiesto de Lux Anima">Explorar el Manifiesto</a>
            </div>
            <div class="absolute bottom-10 left-1/2 -translate-x-1/2 animate-bounce">
                <svg xmlns="http://www.w3.org/2000/svg" class="h-8 w-8 text-white/50" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7" /></svg>
            </div>
        </section>

        <section id="manifesto" class="py-20 md:py-32">
            <div class="container mx-auto px-6 text-center max-w-4xl">
                <div class="fade-in">
                    <h2 class="font-display text-4xl md:text-5xl font-bold mb-6">El Manifiesto Alquímico</h2>
                    <p class="text-xl md:text-2xl text-texto/80 leading-relaxed mb-8 font-light">"Lo que no busca el poder termina siendo lo más poderoso."</p>
                    <p class="text-base md:text-lg text-texto/70 leading-loose">
                        Esta es la piedra angular de nuestra **identidad**. Una filosofía que subraya la autenticidad y el valor intrínseco sobre la autopromoción. En un mercado saturado, nuestro silencio deliberado cultiva un aura de autoridad, misterio y sabiduría. Atraemos a **buscadores** que buscan profundidad y transformación auténtica, no exhibiciones superficiales. Cada expresión de la **esencia**, desde su filosofía hasta su producto, se alinea con una coherencia interna e integridad virtuosa.
                    </p>
                </div>
            </div>
        </section>

        <section id="pilares" class="py-20 md:py-24 bg-texto/5">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 fade-in">
                    <h2 class="font-display text-4xl md:text-5xl font-bold mb-4">Los Pilares del Conocimiento</h2>
                    <p class="max-w-3xl mx-auto text-texto/70 text-lg">Nuestra **esencia** se erige sobre un rico tapiz de tradiciones esotéricas. Hacé clic en cada pilar para revelar su esencia.</p>
                </div>
                <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8">
                    <div class="md:col-span-2 lg:col-span-1 lg:row-span-2 fade-in">
                        <div id="pillar-display" class="sticky top-24 h-[400px] md:h-[500px] glass-card rounded-2xl p-8 md:p-10 flex flex-col justify-center transition-all duration-500">
                            <h3 id="pillar-title" class="font-display text-3xl font-bold mb-4 text-destello">Seleccioná un Pilar</h3>
                            <p id="pillar-description" class="text-texto/80 leading-relaxed">Cada concepto es una puerta a una comprensión más profunda del universo y de uno mismo, formando la base de nuestras ofertas transformadoras.</p>
                        </div>
                    </div>
                    <div id="pillar-grid" class="md:col-span-2 grid grid-cols-1 sm:grid-cols-2 gap-6">
                    </div>
                </div>
            </div>
        </section>
        
        <section id="arquitectura" class="py-20 md:py-32">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 fade-in">
                    <h2 class="font-display text-4xl md:text-5xl font-bold mb-4">Arquitectura de la Esencia</h2>
                    <p class="max-w-3xl mx-auto text-texto/70 text-lg">Un ecosistema multidimensional donde cada nombre tiene un propósito. Hacé clic en cada entidad para ir a su espacio.</p>
                </div>
                <div id="brand-architecture-display" class="max-w-5xl mx-auto">
                </div>
            </div>
        </section>

        <section id="manifestaciones" class="py-20 md:py-24 bg-texto/5">
            <div class="container mx-auto px-6">
                <div class="text-center mb-16 fade-in">
                    <h2 class="font-display text-4xl md:text-5xl font-bold mb-4">Las Manifestaciones</h2>
                    <p class="max-w-3xl mx-auto text-texto/70 text-lg">Aquí, los principios espirituales se transmutan en ofertas tangibles de alta calidad y experiencias elevadas.</p>
                </div>
                <div class="flex justify-center mb-12 fade-in">
                    <div id="manifestation-filter" class="p-1.5 glass-card rounded-full flex space-x-2">
                        <button class="btn-filter active" data-filter="servicios" aria-label="Mostrar servicios">Servicios</button>
                        <button class="btn-filter" data-filter="productos" aria-label="Mostrar productos">Productos</button>
                    </div>
                </div>
                <div id="manifestation-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
                </div>
            </div>
        </section>

        <!-- Nueva Sección: Sacra Atelier -->
        <section id="sacra-atelier" class="py-20 md:py-32 bg-texto/5">
            <div class="container mx-auto px-6 text-center max-w-4xl fade-in">
                <h2 class="font-display text-4xl md:text-5xl font-bold mb-6">Sacra Atelier <span class="text-texto/50 text-2xl">(Próximamente)</span></h2>
                <p class="text-lg text-texto/70 leading-relaxed mb-12">
                    Prendas ceremoniales minimalistas, bordados discretos con símbolos alquímicos y cortes atemporales. Cada pieza se concibe como un ritual de luz y pureza.
                </p>
                <!-- Se eliminó el grid de productos de Sacra Atelier según la solicitud del usuario -->
            </div>
        </section>

        <section id="circulo" class="py-20 md:py-32">
            <div class="container mx-auto px-6 text-center max-w-4xl">
                <div class="fade-in">
                    <h2 class="font-display text-4xl md:text-5xl font-bold mb-6">El Círculo Interno</h2>
                    <p class="text-xl md:text-2xl text-texto/80 leading-relaxed mb-8 font-light">Círculo Lumínico</p>
                    <p class="text-base md:text-lg text-texto/70 leading-loose">
                        Más allá de las ofertas generales yace un círculo interno, un espacio para los iniciados. A través de "Secreto Operativo" y "Exclusivo Para Nadie", ofrecemos acceso por invitación a enseñanzas avanzadas y oportunidades de co-creación. Es la encarnación de nuestra coherencia, un camino para aquellos profundamente alineados con nuestra misión.
                    </p>
                </div>
            </div>
        </section>
    </main>

    <footer class="py-16 bg-texto text-fondo/70">
        <div class="container mx-auto px-6 text-center">
            <p class="font-display text-2xl mb-4">Lux Anima</p>
            <p class="text-sm tracking-wider">© 2025. Que la Santa Cruz sea tu luz.</p>
        </div>
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            gsap.registerPlugin(ScrollTrigger);

            const pillarData = [
                { id: 'rito-elevado', title: 'Rito Elevado', description: 'Prácticas rituales para invocar la presencia de lo divino, buscando la unión y la propia perfección. Enfatiza la transformación interna del practicante.' },
                { id: 'sendero-interno', title: 'Sendero Interno', description: 'Una interpretación moderna de la sabiduría ancestral, ofreciendo técnicas para la exploración interior y la comprensión de las leyes de la energía espiritual.' },
                { id: 'forja-del-ser', title: 'Forja del Ser', description: 'Más allá de la transmutación de la materia, es una disciplina que implica la purificación del alma mediante una rigurosa preparación y enfoque.' },
                { id: 'voz-creadora', title: 'Voz Creadora', description: 'Principio que afirma que "cada palabra es un acto de magia". Mediante la purificación, lo que se dice, sucede, exigiendo precisión e integridad en toda comunicación.' },
                { id: 'sutileza-profunda', title: 'Sutileza Profunda', description: 'Un enfoque anti-promocional. El poder y valor de la esencia se derivan de su integridad intrínseca, no del marketing agresivo. Fomenta un compromiso más profundo.' },
                { id: 'codice-aurico', title: 'Códice Áurico', description: 'Inspirado en los libros de conocimiento oculto y praxis. Se operacionaliza como un manual de la esencia vivo y un marco para la participación del buscador.' }
            ];

            const brandData = {
                name: 'Lux Anima',
                motto: 'SACRA SIT MIHI LUX',
                description: 'Identidad paraguas principal para productos y experiencias espirituales de elevado valor y alcance internacional.',
                children: [
                    {
                        name: 'NectarLux',
                        description: 'Línea principal de servicios y productos de bienestar.',
                        children: [
                            { name: 'NectarLux Studio', description: 'Limpiezas energéticas & KAE para buscadores.', link: 'nectarlux_studio.html' },
                            { name: 'NectarLux Care', description: 'Psiquiatría virtual integrativa y discreta.', link: 'psiquiatria_integral.html' },
                            { name: 'NectarLab', description: 'Próximamente: I+D y productos botánicos ritualizados.', link: '#' },
                            { name: 'NectarLux Academy', description: 'Próximamente: Formación y masterclasses avanzadas.', link: '#' },
                        ]
                    },
                    {
                        name: 'Casa Luxaria',
                        description: 'Próximamente: Espacio físico exclusivo para limpiezas y sesiones privadas, accesible por invitación.',
                        link: '#',
                        children: []
                    },
                    {
                        name: 'LatAm Foresight Studio',
                        description: 'Brazo de consultoría B2B enfocado en futuros, geopolítica y salud planetaria.',
                        link: 'latam_foresight_studio.html',
                        children: []
                    },
                    {
                        name: 'Sacra Atelier',
                        description: 'Próximamente: Línea de indumentaria ceremonial y minimalista, creada para rituales y prácticas conscientes.',
                        link: '#', // Changed to # as it's not a separate page yet
                        children: []
                    },
                    {
                        name: 'Círculo Lumínico',
                        description: 'Próximamente: Círculo interno exclusivo para iniciados, co-creadores y la élite de la comunidad.',
                        link: '#', // Changed to # as it's not a separate page yet
                        children: []
                    }
                ]
            };

            const manifestationData = {
                servicios: [
                    { title: 'Armonizaciones', description: 'Experiencias ultra-exclusivas para eliminar bloqueos energéticos y elevar la frecuencia vibratoria.' },
                    { title: 'Retiros', description: 'Inmersiones profundas en entornos serenos para la regeneración y el silencio interior.' },
                    { title: 'Psiquiatría Integrativa', description: 'Soporte holístico (NectarLux Care) que combina enfoques tradicionales y complementarios.' },
                    { title: 'Consultoría Estratégica', description: 'Visión de futuros para empresas y gobiernos (LatAm Foresight Studio).' },
                ],
                productos: [
                    { title: 'Velas de Intención', description: 'Elaboradas con ceras premium, aceites esenciales y cristales, en un contexto ritual.' },
                    { title: 'Formulaciones Botánicas', description: 'Productos puros y de origen ético (NectarLab) que encarnan la alquimia de la esencia.' },
                ]
            };

            const pillarGrid = document.getElementById('pillar-grid');
            const pillarTitle = document.getElementById('pillar-title');
            const pillarDescription = document.getElementById('pillar-description');
            
            pillarData.forEach(pillar => {
                const card = document.createElement('div');
                card.className = 'pillar-card glass-card rounded-2xl p-6 cursor-pointer h-32 flex items-center fade-in';
                card.dataset.id = pillar.id;
                card.setAttribute('aria-label', `Pilar: ${pillar.title}`);
                card.innerHTML = `<h4 class="font-display text-2xl font-semibold">${pillar.title}</h4>`;
                pillarGrid.appendChild(card);
            });

            const pillarCards = document.querySelectorAll('.pillar-card');
            pillarCards.forEach(card => {
                card.addEventListener('click', () => {
                    const pillar = pillarData.find(p => p.id === card.dataset.id);
                    pillarTitle.textContent = pillar.title;
                    pillarDescription.textContent = pillar.description;
                    
                    pillarCards.forEach(c => c.classList.remove('active'));
                    card.classList.add('active');
                });
            });

            function createBrandHTML(brandNode) {
                let childrenHTML = '';
                if (brandNode.children && brandNode.children.length > 0) {
                    childrenHTML = `<div class="pl-8 mt-4 space-y-4">${brandNode.children.map(createBrandHTML).join('')}</div>`;
                }
                // Check if brandNode has a link and create an anchor tag
                const content = `
                    <div class="p-4 glass-card rounded-lg ${brandNode.link === '#' ? 'cursor-not-allowed opacity-70' : 'cursor-pointer'}">
                        <h4 class="brand-name font-display text-xl font-semibold transition-colors">${brandNode.name}</h4>
                        <p class="brand-description text-texto/70 text-sm leading-relaxed overflow-hidden">${brandNode.description}</p>
                    </div>
                `;
                if (brandNode.link && brandNode.link !== '#') {
                    return `
                        <a href="${brandNode.link}" class="brand-item fade-in animate-pulse-subtle block no-underline text-current">
                            ${content}
                            ${childrenHTML}
                        </a>
                    `;
                } else {
                    return `
                        <div class="brand-item fade-in animate-pulse-subtle">
                            ${content}
                            ${childrenHTML}
                        </div>
                    `;
                }
            }
            document.getElementById('brand-architecture-display').innerHTML = createBrandHTML(brandData);

            const manifestationGrid = document.getElementById('manifestation-grid');
            const manifestationFilterButtons = document.querySelectorAll('#manifestation-filter button');

            function renderManifestations(filter) {
                gsap.to(manifestationGrid.children, {
                    autoAlpha: 0,
                    scale: 0.9,
                    duration: 0.2,
                    stagger: 0.05,
                    onComplete: () => {
                        manifestationGrid.innerHTML = '';
                        // Ensure manifestationData[filter] is an array before forEach
                        const itemsToRender = manifestationData[filter] || [];
                        itemsToRender.forEach((item, index) => {
                            const card = document.createElement('div');
                            const titleId = `manifestation-title-${filter}-${index}`;
                            const descriptionId = `manifestation-description-${filter}-${index}`;

                            card.className = 'glass-card rounded-2xl p-8 flex flex-col';
                            card.setAttribute('role', 'group');
                            card.setAttribute('aria-labelledby', titleId);
                            card.setAttribute('aria-describedby', descriptionId);
                            
                            let imageHtml = '';
                            if (item.image) {
                                imageHtml = `
                                    <picture>
                                        <source srcset="${item.image.webp}" type="image/webp">
                                        <img src="${item.image.jpg}" alt="${item.title}" width="600" height="400" loading="lazy" class="w-full h-auto mb-4 rounded-md" role="img" aria-label="Imagen de ${item.title}">
                                    </picture>
                                `;
                            }

                            const buttonText = 'Explorar';
                            const buttonAriaLabel = `Explorar ${item.title}`;

                            const intentBadge = item.intent ? `<span class="badge-intent">${item.intent}</span>` : '';

                            card.innerHTML = `
                                <span class="sigil-icon"></span> <!-- Removed emoji -->
                                ${imageHtml}
                                <h4 id="${titleId}" class="font-display text-2xl font-bold mb-3">${item.title}</h4>
                                <p id="${descriptionId}" class="text-texto/70 leading-relaxed mb-4">${item.description}</p>
                                ${intentBadge}
                                <button class="btn-primary mt-auto" aria-label="${buttonAriaLabel}">
                                    ${buttonText}
                                </button>
                            `;
                            manifestationGrid.appendChild(card);

                            // GSAP Hover for manifestation cards
                            card.addEventListener('mouseenter', () => {
                                gsap.to(card, {
                                    scale: 1.03,
                                    duration: 0.4,
                                    ease: 'power2.out'
                                });
                            });
                            card.addEventListener('mouseleave', () => {
                                gsap.to(card, {
                                    scale: 1,
                                    duration: 0.4,
                                    ease: 'power2.out'
                                });
                            });

                            gsap.fromTo(card,
                                { autoAlpha: 0, scale: 0.9, y: 20 },
                                { autoAlpha: 1, scale: 1, y: 0, duration: 0.5, delay: index * 0.1, ease: "back.out(1.7)" }
                            );
                        });
                    }
                });
            }

            manifestationFilterButtons.forEach(button => {
                // Only add click listener for buttons that have a data-filter attribute
                // and whose data-filter value exists as a key in manifestationData
                if (button.dataset.filter && manifestationData.hasOwnProperty(button.dataset.filter)) {
                    button.addEventListener('click', () => {
                        const filter = button.dataset.filter;
                        manifestationFilterButtons.forEach(btn => btn.classList.remove('active'));
                        button.classList.add('active');
                        renderManifestations(filter);
                    });
                }
            });
            renderManifestations('servicios');

            // GSAP Hover for Sacra Atelier cards
            const sacraAtelierCards = document.querySelectorAll('#sacra-atelier-grid .glass-card');
            sacraAtelierCards.forEach(card => {
                card.addEventListener('mouseenter', () => {
                    gsap.to(card, {
                        scale: 1.03,
                        duration: 0.4,
                        ease: 'power2.out'
                    });
                });
                card.addEventListener('mouseleave', () => {
                    gsap.to(card, {
                        scale: 1,
                        duration: 0.4,
                        ease: 'power2.out'
                    });
                });
            });


            const observer = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        entry.target.classList.add('visible');
                    }
                });
            }, { threshold: 0.2 });

            document.querySelectorAll('.fade-in').forEach(el => {
                observer.observe(el);
            });

            const lottieObserver = new IntersectionObserver((entries) => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        const player = entry.target;
                        if (!player.src) {
                            player.src = player.dataset.src;
                            player.load();
                        }
                        player.play();
                        lottieObserver.unobserve(player);
                    }
                });
            }, { threshold: 0.1 });

            document.querySelectorAll('lottie-player').forEach(player => {
                player.dataset.src = player.src;
                player.removeAttribute('src');
                player.setAttribute('loading', 'lazy');
                player.setAttribute('autoplay', 'autoplay');
                player.setAttribute('muted', 'muted');
                lottieObserver.observe(player);
            });

            const navHeader = document.getElementById('nav-header');
            window.addEventListener('scroll', () => {
                if (window.scrollY > 50) {
                    navHeader.classList.add('bg-white', 'shadow-md', 'backdrop-blur-sm'); /* Ensure white background on scroll */
                } else {
                    navHeader.classList.remove('bg-white', 'shadow-md', 'backdrop-blur-sm');
                    navHeader.classList.add('bg-transparent'); /* Set to transparent when at top */
                }
            });

            // Mobile menu logic
            const hamburgerBtn = document.getElementById('hamburger-btn');
            const mobileMenuOverlay = document.getElementById('mobile-menu-overlay');
            const mobileMenuDrawer = document.getElementById('mobile-menu-drawer');
            const mobileNavLinks = mobileMenuDrawer.querySelectorAll('a');

            hamburgerBtn.addEventListener('click', () => {
                hamburgerBtn.classList.toggle('open');
                mobileMenuOverlay.classList.toggle('open');
                mobileMenuDrawer.classList.toggle('open');
                document.body.classList.toggle('overflow-hidden');
            });

            mobileMenuOverlay.addEventListener('click', (e) => {
                if (e.target === mobileMenuOverlay) {
                    hamburgerBtn.classList.remove('open');
                    mobileMenuOverlay.classList.remove('open');
                    mobileMenuDrawer.classList.remove('open');
                    document.body.classList.remove('overflow-hidden');
                }
            });

            mobileNavLinks.forEach(link => {
                link.addEventListener('click', () => {
                    hamburgerBtn.classList.remove('open');
                    mobileMenuOverlay.classList.remove('open');
                    mobileMenuDrawer.classList.remove('open');
                    document.body.classList.remove('overflow-hidden');
                });
            });
        });
    </script>
</body>
</html>
